<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<link rel="stylesheet" href="css/lightbox.css" type="text/css" media="screen" />
	<meta charset="utf-8">
	<title>Lab 10 - Javascript Image Gallery</title>
    
    <script type="text/javascript" src="js/prototype.js"></script>
    <script type="text/javascript" src="js/scriptaculous.js?load=effects,builder" ></script>
    <script type="text/javascript" src="js/lightbox.js"></script>
    <script type="text/javascript" src="js/lightbox-2.6.min.js"></script>
    <script type="text/javascript" src="js/modernizr.custom.js"></script>
    
    <style type="text/css">
		div#r1c1 {width: 150px; height: 150px; position:absolute; top: 80px; left: 100px; border:1px solid #ccc;}
		div#r1c2 {width: 150px; height: 150px; position:absolute; top: 80px; left: 260px; border:1px solid #ccc;}
		div#r2c1 {width: 150px; height: 150px; position:absolute; top: 240px; left: 100px; border:1px solid #ccc;}
		div#r2c2 {width: 150px; height: 150px; position:absolute; top: 240px; left: 260px; border:1px solid #ccc;}
		div#r3c1 {width: 150px; height: 150px; position:absolute; top: 400px; left: 100px; border:1px solid #ccc;}
		div#r3c2 {width: 150px; height: 150px; position:absolute; top: 400px; left: 260px; border:1px solid #ccc;}
		div#nav {position:absolute; top: 55px; left:100px; width: 310px;}
		div#cats {float:right; }
		div select {float:right;}
		div div {float:left;}
		img {border:0px;}
		span{ text-decoration:underline; color:#00c; cursor:pointer;}
		h1 {text-align:center; width: 480px; font-size: 14pt; margin:5px; padding:5px;}
			
	</style>
</head>

<body>
<h1>Lab 10 - Javascript Image Gallery</h1>

<div id="nav">
	<div id="pagination"></div>
    <div id="cats">
    <form id="form0">
    	<label id="categories" for="catDropDown">Category:</label>
        <select onChange="javascript:getCategory()" id="catDropDown" name="catDropDown">
        	<option value="-" selected="selected">Select a Category</option>
            <option value="bellTower">Bell Tower</option>
            <option value="fountain">Fountain</option>
        </select>
    </form>
    </div>
</div>

<div id="r1c1"></div>
<div id="r1c2"></div>
<div id="r2c1"></div>
<div id="r2c2"></div>
<div id="r3c1"></div>
<div id="r3c2"></div>

<script type="text/javascript"><!--
	//load these from the database on page load
	//use php to dynamically create these arrays. Hint: for loop-pull image name from db
	var bellTowerArray 	= new Array();
	bellTowerArray[0] 	= "bellTower01.jpg";
	bellTowerArray[1] 	= "bellTower02.jpg";
	bellTowerArray[2] 	= "bellTower03.jpg";
	bellTowerArray[3] 	= "bellTower04.jpg";
	bellTowerArray[4] 	= "bellTower05.jpg";
	bellTowerArray[5] 	= "bellTower06.jpg";
	bellTowerArray[6] 	= "bellTower07.jpg";
	bellTowerArray[7] 	= "bellTower08.jpg";
	bellTowerArray[8] 	= "bellTower09.jpg";
	bellTowerArray[9] 	= "bellTower10.jpg";
	bellTowerArray[10] 	= "bellTower11.jpg";
	bellTowerArray[11] 	= "bellTower12.jpg";
	bellTowerArray[12] 	= "bellTower13.jpg";
	bellTowerArray[13] 	= "bellTower14.jpg";
	bellTowerArray[14] 	= "bellTower15.jpg";
	bellTowerArray[15] 	= "bellTower16.jpg";
	
	var fountainArray = new Array();
	fountainArray[0] 	= "fountain01.jpg";
	fountainArray[1] 	= "fountain02.jpg";
	fountainArray[2] 	= "fountain03.jpg";
	fountainArray[3] 	= "fountain04.jpg";
	fountainArray[4] 	= "fountain05.jpg";
	fountainArray[5] 	= "fountain06.jpg";
	fountainArray[6] 	= "fountain07.jpg";
	fountainArray[7] 	= "fountain08.jpg";
	fountainArray[8] 	= "fountain09.jpg";
	fountainArray[9] 	= "fountain10.jpg";
	fountainArray[10] 	= "fountain11.jpg";
	fountainArray[11] 	= "fountain12.jpg";
	fountainArray[12] 	= "fountain13.jpg";
	fountainArray[13] 	= "fountain14.jpg";
	fountainArray[14] 	= "fountain15.jpg";
	fountainArray[15] 	= "fountain16.jpg";
	fountainArray[16] 	= "fountain17.jpg";
	fountainArray[17] 	= "fountain18.jpg";
	
	//////////////////////////////////////////////////////
	// funtion getCategory()
	// when the category drop down box is changed this event is called.
	// this funciton checks to see which <option> is selected,
	// then stores the corresponding array into our variable currArray 
	// finally it displays the images and performs pagination
	////////////////////////////////////////////////////////
	
	function getCategory()
	{
		if(document.getElementById("catDropDown").selectedIndex ==1)
			currArray = bellTowerArray;
		else if(document.getElementById("catDropDown").selectedIndex == 2)
			currArray = fountainArray;
			
		if (document.getElementById("catDropDown").selectedIndex > 0)
		{
			displayImages(0);
			doPagination();
		}
	}//end function getCategory
	
	//////////////////////////////////////////////////////////////
	// function displayImages(Start)
	// argument: start
	//		start is an integer representing the starting point within the current array
	//		so you might pass in 5, then arr[5], arr[6], arr[7], arr[8], arr[9] would be displayed
	//	there are 6 images in this example
	//	thus, there are 6 if statements
	// if there is an image left in the array, display it
	/////////////////////////////////////////////////////////////
	
	function displayImages(start)
	{
		//dynamically write these js lines using php and data from the database
		//write the _large file to the href
		//write the _thumb file to the src
		//write the description to the title(both in <a> and in <img>
		//write the _description to the alt in the <img> tag
		
		// "\" is the escape sequence for "
		// the + at the end of each line: goes\" /><"+"/a>"
		//		this is to avoid a validation error
		
		//if the start value passed in is NOT greater than the length of the array
		if(!(start > currArray.length-1))
			document.getElementById("r1c1").innerHTML = "<a id=\"r1c1_a\" href=\"images/" +currArray[start] + "\" rel=\"lightbox\" title=\"This is where your description goes\"><img src=\"images/thumb_" + currArray[start] + "\" id=\"r1c1_img\" width=\"150\" height=\"150\" alt=\"This is where your description goes\" title=\"This is where your description goes\" /><"+"/a>";
		else
			document.getElementById("r1c1").innerHTML = "";
			
		//if the start value of +1 passed in is not greater than the length of the array
		if(!(start+1 > currArray.length-1))
			document.getElementById("r1c2").innerHTML = "<a id=\"r1c2_a\" href=\"images/" +currArray[start+1] + "\" rel=\"lightbox\" title=\"This is another description\"><img src=\"images/thumb_" + currArray[start+1] + "\" id=\"r1c2_img\" width=\"150\" height=\"150\" alt=\"This is another description goes\" title=\"This is another description\" /><"+"/a>";
		else
			document.getElementById("r1c2").innerHTML = "";
			
		//if the start value of +2 passed in is NOT greater than the length of the array
		if(!(start+2 > currArray.length-1))
			document.getElementById("r2c1").innerHTML = "<a id=\"r2c1_a\" href=\"images/" +currArray[start +2] + "\" rel=\"lightbox\" title=\"This is where your description goes\"><img src=\"images/thumb_" + currArray[start +2] + "\" id=\"r2c1_img\" width=\"150\" height=\"150\" alt=\"This is where your description goes\" title=\"This is where your description goes\" /><"+"/a>";
		else
			document.getElementById("r2c1").innerHTML = "";
			
			
		//if the start value of +3 passed in is NOT greater than the length of the array
		if(!(start+3 > currArray.length-1))
			document.getElementById("r2c2").innerHTML = "<a id=\"r2c2_a\" href=\"images/" +currArray[start +3] + "\" rel=\"lightbox\" title=\"This is where your description goes\"><img src=\"images/thumb_" + currArray[start+3] + "\" id=\"r2c2_img\" width=\"150\" height=\"150\" alt=\"This is where your description goes\" title=\"This is where your description goes\" /><"+"/a>";
		else
			document.getElementById("r2c2").innerHTML = "";
		
			
		//if the start value of +2 passed in is NOT greater than the length of the array
		if(!(start+4 > currArray.length-1))
			document.getElementById("r3c1").innerHTML = "<a id=\"r3c1_a\" href=\"images/" +currArray[start+4] + "\" rel=\"lightbox\" title=\"This is where your description goes\"><img src=\"images/thumb_" + currArray[start+4] + "\" id=\"r3c1_img\" width=\"150\" height=\"150\" alt=\"This is where your description goes\" title=\"This is where your description goes\" /><"+"/a>";
		else
			document.getElementById("r3c1").innerHTML = "";
			
			
		//if the start value of +2 passed in is NOT greater than the length of the array
		if(!(start+5 > currArray.length-1))
			document.getElementById("r3c2").innerHTML = "<a id=\"r2c2_a\" href=\"images/" +currArray[start+5] + "\" rel=\"lightbox\" title=\"This is where your description goes\"><img src=\"images/thumb_" + currArray[start+5] + "\" id=\"r3c2_img\" width=\"150\" height=\"150\" alt=\"This is where your description goes\" title=\"This is where your description goes\" /><"+"/a>";
		else
			document.getElementById("r3c2").innerHTML = "";
			
	}
	
	//////////////////////////////////////////////////////////////
	// function doPagination
	// creates hyperlinked page numbers
	//
	//////////////////////////////////////////////////////////////
	
	function doPagination () 
	{
		//if you have 43 images ==> 43 / 6 = 7 R1 ==> 8 pages
		var numpages = (currArray.length / 6) + 1; //determine the number of pages
		var numLeft = currArray.length % 6;
		
		document.getElementById("pagination").innerHTML = ""; //clear the div
		
		//loop to create the page numbers
		//the span tag is providing our css formatting above
		//if you have 43 images ==> 43 / 6 = 7 R1 ==> 8 pages ==> loop 8 times
		for( i =0; i <numpages-1; i++)
		{
			//set the innerHTML of the pagination div
			document.getElementById("pagination").innerHTML += "<span onclick='displayImages("+i*6+")'>" + (i+1) + "<"+"/span> ";
		}
		if (numpages <= 1)
			document.getElementById("pagination").innerHTML = ""; //clear the innerHTML of the pagination
			
	}//end function doPagination
	
	//first load
	//set the dropdown menue to the topmost <option>
	document.getElementById("catDropDown").selectedIndex = 0;
	
	
--></script>
</body>
</html>
